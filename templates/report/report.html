{% load socialaccount %}
{% load static %}
{% load utils %}
<html lang="ko">

<head>
    <meta charset="utf-8">
    <title>Lucky Seven - Very Nice finance 7ì¡°</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{%static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{%static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{%static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{%static 'css/style.css' %}" rel="stylesheet">
</head>

<body class="scrollbar">
<style>
/* ëŒ€í™”ì°½ ìŠ¤íƒ€ì¼ë§ */
#chatbot_text {
  display: flex;
  flex-direction: column;
}

/* ì‚¬ìš©ì ì§ˆë¬¸ ìŠ¤íƒ€ì¼ë§ */
#chatbot_text p {
  margin: 5px;
  padding: 10px;
  position: relative;
  border-radius: 10px;
  font-weight: bold; /* ì•½ê°„ì˜ ë³¼ë“œ í…ìŠ¤íŠ¸ */
  font-size: 13px; /* ê¸€ì”¨ í¬ê¸°ë¥¼ 13pxë¡œ ì¡°ì ˆ */
}

#chatbot_text p.user-question {
  text-align: right;
  margin-left: auto;
  background-color: #e4f0ff; /* ì–´ë‘ìš´ í•˜ëŠ˜ìƒ‰ */
  color: #333333; /* í°ìƒ‰ ê¸€ì”¨ */
  letter-spacing: 1px;
  font-family: 'Malgun Gothic', 'NanumGothic', sans-serif; /* ê³ ë”•ì²´ ì„¤ì • */
}

#chatbot_text p.user-question::before {
  content: "";
  position: absolute;
  top: 50%;
  right: -14px; /* ìˆ˜ì •ëœ ë¶€ë¶„ */
  margin-left: -7px; /* ìˆ˜ì •ëœ ë¶€ë¶„ */
  border-style: solid;
  border-width: 8px;
  border-color: transparent transparent transparent #e4f0ff;
}

/* ì±—ë´‡ ë‹µë³€ ìŠ¤íƒ€ì¼ë§ */
#chatbot_text p.chatbot-answer {
  text-align: left;
  margin-right: auto;
  background-color: #f1f3f5; /* ì—°í•œ íšŒìƒ‰ */
  color: #333333; /* ì–´ë‘ìš´ íšŒìƒ‰ ê¸€ì”¨ */
  font-size: 13px; /* ê¸€ì”¨ í¬ê¸°ë¥¼ 13pxë¡œ ì¡°ì ˆ */
  letter-spacing: 1px;
  font-family: 'Malgun Gothic', 'NanumGothic', sans-serif; /* ê³ ë”•ì²´ ì„¤ì • */
}

#chatbot_text p.chatbot-answer::before {
  content: "";
  position: absolute;
  top: 50%;
  right: 100%;
  margin-right: -1px; /* ìˆ˜ì •ëœ ë¶€ë¶„ */
  border-style: solid;
  border-width: 8px;
  border-color: transparent #f1f3f5 transparent transparent;
}
</style>
<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 
        top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0" id="home">
            <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
                <a href="/" class="navbar-brand p-0">
                    <h1 class="m-0">Hey! ê¸ˆìœµ+</h1>
                    <!-- <img src="img/logo.png" alt="Logo"> -->
                </a>
                <button class="navbar-toggler rounded-pill" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav mx-auto py-0">
                        
                        <a href="/summary" class="nav-item nav-link">ìš”ì•½ì„œë¹„ìŠ¤</a>
                        <a href="javascript:void(0)" class="nav-item nav-link">ê¸ˆìœµ ë¦¬í¬íŠ¸</a>
                        <a href="/quiz" class="nav-item nav-link">ê¸ˆìœµ í€´ì¦ˆ</a>
                        <a href="/board" class="nav-item nav-link">ê²Œì‹œíŒ</a>
                        
                    </div>
                    <!-- ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ -->
                    {% if not user.is_authenticated %}
                        <a href="/accounts/signup" class="btn btn-light rounded-pill py-2 px-4 ms-3 d-none d-lg-block">íšŒì›ê°€ì…</a>
                        <a href="/accounts/login" class="btn btn-light rounded-pill py-2 px-4 ms-3 d-none d-lg-block">ë¡œê·¸ì¸</a>
                    {% else %}
                        <a href="#" class="btn-welcome py-2 px-4 ms-3 d-none d-lg-block">{{user.name}}ë‹˜ ë°˜ê°‘ìŠµë‹ˆë‹¤.</a></li>
                        {% comment %} <a href="#" class="btn btn-light rounded-pill py-2 px-4 ms-3 d-none d-lg-block">í”„ë¡œí•„</a> </li>  {% endcomment %}
                        <a href="/accounts/logout?next={{request.path}}" class="btn btn-light rounded-pill py-2 px-4 ms-3 d-none d-lg-block">ë¡œê·¸ ì•„ì›ƒ</a></li>
                        <!--?next={{request.path}}ëŠ” í˜„ì¬ pathê°’ì„ ê°™ì´ ë„˜ê²¨ì£¼ì–´ì„œ ë¡œê·¸ì•„ì›ƒ í•œ ë‹¤ìŒ í˜„ì¬ pathë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ëœë‹¤.-->
                        {% comment %} <a href="{% url 'quiz:quiz-list' %}" class="btn btn-light rounded-pill py-2 px-4 ms-3 d-none d-lg-block">í€´ì¦ˆ</a></li> {% endcomment %}
                    {% endif %}
                </div>
            </nav>
            <div class="container-xxl", id="main">
                <div class="custom">
                    <div class="container">
                        <div class="row g-5 align-items-center">
                            <div class="content-container">
                                <div class="content-container container-md">
                                    <div class="textset content-tit">
                                      <h2 class="textset-tit">Today's ê¸ˆìœµ ë¦¬í¬íŠ¸</h2>
                                      <br>
                                      <h2 class="textset-subtit">| Title | {{report.title}}</h2>
                                      <br>
                                        <!--ê¸ˆìœµë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ -->
                                      <a class="report-font" download href="{{report.file.url}}">ğŸ“‘ ê¸ˆìœµ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ</a>
                                      <div id="example1" style="height:30rem;"></div>
                                    </div>
                                </div>
                              
                              
                              
                            <div class="container-md">
                                <div class="custom-container-2">
                                  <div class="box-container shadow">
                                    <br>
                                    <br>
                                    <br>
                                    <br>
                                    <!-- ë¦¬í¬íŠ¸ ìš”ì•½ ë‚´ìš© -->
                                    <div class="report-title">ê¸ˆìœµ ë¦¬í¬íŠ¸ AI ìš”ì•½ë³¸</div>
                                    <br>
                                    <br>
                                    <br>
                                    <br>

                                    <p-1>{{summary}}</p-1>
                                  </div>
                                  <div class="box-container-2">
                                    <div class="card-chat-bot">
                                      <div class="card shadow">
                                      
                                          <div class="row align-items-center">
                                            <div class="col">
                                              <br>
                                              <h-report-title>ê¸ˆìœµ ë¦¬í¬íŠ¸ Chatbot</h-report-title>
                                              <br>

                                            </div>
                                          </div>
                                      
                                        <div class="report-chat" style="max-height: 1000px; overflow-y: auto; overflow-x: hidden;">
                                            
                                            <div class="news-text" id='chatbot_text'>{{chat_answer}}</div>
                                        </div>
                                        <div class="card-footer-2">
                                            <div class="send-report" >
                                              <textarea class="send-text-report" placeholder="ë©”ì„¸ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="message-input"></textarea>
                                              <button class='report-btn' onclick="sendMessage()">ì „ì†¡</button>
                                            </div>
                                            
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
          </div>
          <hr>
            </div>
        </div>
    </div>
        <!-- Navbar & Hero End -->
        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-body footer wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5 px-lg-5">
                <div class="row g-5">
                    <div class="col-md-6 col-lg-3">
                        <p class="section-title text-white h5 mb-4">ì£¼ì†Œ<span></span></p>
                        <p><i class="fa fa-map-marker-alt me-3"></i>(ì£¼)ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬ ê°€ì •ë™ ì¸ì²œì„œêµ¬ì§€ì›ì„¼í„°</p>
                        <p><i class="fa fa-phone-alt me-3"></i>+010 4526 6794</p>
                        <p><i class="fa fa-envelope me-3"></i>woo@gmail.com</p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-instagram"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <p class="section-title text-white h5 mb-4">ë¹ ë¥¸ ê²€ìƒ‰<span></span></p>
                        <a class="btn btn-link" href="">ë©”ì¸</a>
                        <a class="btn btn-link" href="">ì„œë¹„ìŠ¤ ì†Œê°œ</a>
                        <a class="btn btn-link" href="">AI ì¬ë¬´ë¶„ì„</a>
                        <a class="btn btn-link" href="">ì¶”ì²œì„œë¹„ìŠ¤</a>
                        <a class="btn btn-link" href="">ê¸ˆìœµí€´ì¦ˆ</a>
                        <a class="btn btn-link" href="">ë¬¸ì˜ì‚¬í•­</a>
                        <a class="btn btn-link" href="">ê²Œì‹œíŒ</a>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <p class="section-title text-white h5 mb-4">(ì£¼)ìš°ìƒìƒí”ŒëŸ¬ìŠ¤<span></span></p>
                        <a class="btn btn-link" href="">ì†Œê°œ</a>
                        <a class="btn btn-link" href="">ì—…ì </a>
                        <a class="btn btn-link" href="">ì „ëµ</a>
                        <a class="btn btn-link" href="">ì—­ì‚¬</a>
                        <a class="btn btn-link" href="">ì˜¤ì‹œëŠ”ê¸¸</a>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <p class="section-title text-white h5 mb-4">ë‰´ìŠ¤ë ˆí„°<span></span></p>
                        <p>AIê°€ ì„¤ëª…í•´ì£¼ëŠ” ê¸ˆìœµ ì •ë³´ ìš”ì•½ ì„œë¹„ìŠ¤ë¥¼ ë°›ê³  ì‹¶ìœ¼ë©´ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”</p>
                        <div class="position-relative w-100 mt-3">
                            <input class="form-control border-0 rounded-pill w-100 ps-4 pe-5" type="text" placeholder="ì´ë©”ì¼ ì…ë ¥í•˜ì„¸ìš”" style="height: 48px;">
                            <button type="button" class="btn shadow-none position-absolute top-0 end-0 mt-1 me-2"><i class="fa fa-paper-plane text-primary fs-4"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container px-lg-5">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="#">(ì£¼)</a>, COPYRIGHTS ìš°ìƒìƒí”ŒëŸ¬ìŠ¤. ALL RIGHTS RESERVED.      
							
							<!--/*** This template is free as long as you keep the footer authorâ€™s credit link/attribution link/backlink. If you'd like to use the template without the footer authorâ€™s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
							 <a class="border-bottom" href="https://htmlcodex.com">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨|</a>
                             <a class="border-bottom" href="https://htmlcodex.com">ê°œì¸ì •ë³´ ì²˜ë¦¬ìœ„íƒí˜„í™©|</a>
                             <a class="border-bottom" href="https://htmlcodex.com">ì‹ ìš©ì •ë³´ì œê³µ í™œìš©ì— ëŒ€í•œ ê³ ê°ê¶Œë¦¬|</a>
                            rder-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a>
                             <br>Distributed By: <a class="bo
                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            <div class="footer-menu">
                                <a href="">ë©”ì¸</a>
                                <a href="">ARSì•ˆë‚´</a>
                                <a href="">ê³ ê°ì„¼í„°</a>
                                <a href="">ì§ˆë¬¸ ë° ë‹µë³€</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js" integrity="sha512-lDL6DD6x4foKuSTkRUKIMQJAoisDeojVPXknggl4fZWMr2/M/hMiKLs6sqUvxP/T2zXdrDMbLJ0/ru8QSZrnoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>

    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
</body>


</html>
{% csrf_token %}
<script>
  $(function(){
    
    PDFObject.embed("{{report.file.url}}","#example1");
  });
  function sendMessage() {
    // crsf í† í° ê°€ì ¸ì˜¤ê¸°
    var csrftoken = $("[name=csrfmiddlewaretoken]").val();

    // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì§ˆë¬¸ ê°€ì ¸ì˜¤ê¸°
    let userQuestion = $('#message-input').val();
  
    // ì‚¬ìš©ì ì§ˆë¬¸ì„ ëŒ€í™”ì°½ì— ì¶”ê°€
    $('#chatbot_text').append("<p class='user-question'>" + userQuestion + "</p>");
  
    // AJAXë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì— ì§ˆë¬¸ì„ ì „ì†¡í•˜ê³  ë‹µë³€ì„ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„
    $.ajax({
      type: 'post',
      url: '/report/',
      data: {
        data: userQuestion,
        csrfmiddlewaretoken: csrftoken,
      },
      success: function (data) {
        console.log(data);
  
        // ì±—ë´‡ì˜ ë‹µë³€ì„ ëŒ€í™”ì°½ì— ì¶”ê°€
        $('#chatbot_text').append("<p class='chatbot-answer'>" + data.chat_answer + "</p>");
  
        // ë©”ì‹œì§€ ì „ì†¡ í›„ textarea ë¹„ìš°ê¸°
        $('#message-input').val('');
  
        // placeholderë¥¼ ë‹¤ì‹œ ë³´ì´ë„ë¡ ì„¤ì • (ìƒëµ ê°€ëŠ¥í•˜ë‚˜ ì¶”ê°€í•˜ë©´ ë” í™•ì‹¤í•¨)
        $('#message-input').attr("placeholder", "ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”");

        // ëŒ€í™”ì°½ì„ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
        $('.report-chat').scrollTop($('.report-chat')[0].scrollHeight);
      }
    });

    // ëŒ€í™”ì°½ì„ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
    $('.report-chat').scrollTop($('.report-chat')[0].scrollHeight);
  }

  $('.report-chat').on('scroll', function () {
    if ($('.report-chat').scrollTop() + $('.report-chat').innerHeight() >= $('.report-chat')[0].scrollHeight) {
      // ë§¨ ì•„ë˜ì— ë„ë‹¬í•œ ê²½ìš° ìŠ¤í¬ë¡¤ì„ ìœ ì§€
      $('.report-chat').scrollTop($('.report-chat')[0].scrollHeight);
    }
  });
</script>
<style>
    .opilsol-N24 .content-container {
        margin-bottom: 8rem;
        padding: 8rem 0;
      }
      
      .opilsol-N24 table {
        table-layout: fixed;
      }
      
      .opilsol-N24 .tableset .tableset-table> :not(caption):not(colgroup)>*>* {
        padding: 1.3rem 2.4rem;
      }
      
      .opilsol-N24 .table .thead-border-top .number,
      .opilsol-N24 .table tbody .number {
        padding: 1.3rem;
        width: 10rem;
        min-width: 10rem;
        text-align: center;
        line-height: var(--lh-h6);
        font-size: var(--fs-p1);
        font-family: var(--ff-po);
        color: var(--text-color7);
      }
      
      .opilsol-N24 .table .thead-border-top .last-child,
      .opilsol-N24 .table tbody .last-child {
        margin-left: auto;
        width: 12rem;
        min-width: 12rem;
        line-height: var(--lh-h6);
        text-align: center;
        font-size: var(--fs-p1);
        color: var(--text-color7);
      }
      
      .opilsol-N24 .table .thead-border-top th:nth-of-type(2) {
        text-align: center;
        color: var(--text-color1);
      }
      
      .opilsol-N24 .table tbody td:nth-of-type(2) a {
        overflow: hidden;
        display: block;
        text-align: left;
        white-space: nowrap;
        text-overflow: ellipsis;
        color: var(--text-color1);
      }
      
      .opilsol-N24 .table tr:hover td {
        background-color: var(--con-bg-gray);
      }
      
      .opilsol-N24 .pagiset {
        margin-top: 8rem;
      }
      
      .opilsol-N24 .pagiset-link {
        font-family: var(--ff-en);
        font-weight: 400;
      }
      
      @media (max-width: 1366px) {
        .opilsol-N24 .container-md {
          padding: 0 1.6rem;
        }
      }
      
      @media (max-width: 1024px) {
        .opilsol-N24 .content-container {
          margin-bottom: 6rem;
          padding: 4rem 0;
        }
      
        .opilsol-N24 .table .thead-border-top,
        .opilsol-N24 .table .number {
          display: none;
        }
      
        .tableset .tableset-table {
          min-width: 0;
        }
      
        .opilsol-N24 .tableset .tableset-table> :not(caption):not(colgroup)>*>* {
          padding: 0 0 0.5rem 0;
        }
      
        .opilsol-N24 .table tbody tr {
          display: flex;
          flex-direction: column;
          width: calc(100vw - 3.2rem);
        }
      
        .opilsol-N24 .table tbody tr:first-child {
          border-top: 1px solid var(--line-color3);
        }
      
        .opilsol-N24 .table tbody td:nth-of-type(2) {
          padding: 0.8rem 0 0;
          border-bottom: 0 none;
        }
      
        .opilsol-N24 .table tbody .last-child {
          width: 100%;
          text-align: left;
        }
      
        .opilsol-N24 .pagiset {
          margin-top: 4rem;
        }
      
        .opilsol-N24 .pagiset-link {
          width: 3.2rem;
          height: 3.2rem;
        }
      }
</style>