<!--

=========================================================
* Argon Dashboard - v1.1.2
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2020 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
{% load static %}
{% load socialaccount %}
{% load humanize %}
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
    HEY, GOLD!
  </title>
  <!-- Favicon -->
  <link href="{%static '/assets/img/brand/favicon.png' %}" rel="icon" type="image/png">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <!-- Icons -->
  <link href="{%static '/assets/js/plugins/nucleo/css/nucleo.css' %}" rel="stylesheet" />
  <link href="{%static '/assets/js/plugins/@fortawesome/fontawesome-free/css/all.min.css' %}" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="{%static '/assets/css/argon-dashboard.css'%}?v=1.1.2" rel="stylesheet" />
</head>

<body class="scrollbar">
  <nav class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light bg-white" id="sidenav-main">
    <div class="container-fluid">
      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- Brand -->
      <a href="/" class="navbar-brand p-0">
        <h1 class="m-0">Hey, ê¸ˆìœµ</h1>
        <!-- <img src="img/logo.png" alt="Logo"> -->
      </a>
      <!-- User -->
      <ul class="nav align-items-center d-md-none">
        <li class="nav-item dropdown">
          <a class="nav-link nav-link-icon" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="ni ni-bell-55"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right" aria-labelledby="navbar-default_dropdown_1">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="media align-items-center">
              <span class="avatar avatar-sm rounded-circle">
                <img alt="Image placeholder" src="./assets/img/theme/team-1-800x800.jpg">
              </span>
            </div>
          </a>
          <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
            <div class=" dropdown-header noti-title">
              <h6 class="text-overflow m-0">Welcome!</h6>
            </div>
            <a href="./examples/profile.html" class="dropdown-item">
              <i class="ni ni-single-02"></i>
              <span>My profile</span>
            </a>
            <a href="./examples/profile.html" class="dropdown-item">
              <i class="ni ni-settings-gear-65"></i>
              <span>Settings</span>
            </a>
            <a href="./examples/profile.html" class="dropdown-item">
              <i class="ni ni-calendar-grid-58"></i>
              <span>Activity</span>
            </a>
            <a href="./examples/profile.html" class="dropdown-item">
              <i class="ni ni-support-16"></i>
              <span>Support</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#!" class="dropdown-item">
              <i class="ni ni-user-run"></i>
              <span>Logout</span>
            </a>
          </div>
        </li>
      </ul>
      <!-- Collapse -->
      <div class="collapse navbar-collapse" id="sidenav-collapse-main">
        <!-- Collapse header -->
        <div class="navbar-collapse-header d-md-none">
          <div class="row">
            <div class="col-6 collapse-brand">
              <a href="./index.html">
                <img src="{%static '/assets/img/brand/blue.png' %}">
              </a>
            </div>
            <div class="col-6 collapse-close">
              <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle sidenav">
                <span></span>
                <span></span>
              </button>
            </div>
          </div>
        </div>
        <!-- Form -->
        <form class="mt-4 mb-3 d-md-none">
          <div class="input-group input-group-rounded input-group-merge">
            <input type="search" class="form-control form-control-rounded form-control-prepended" placeholder="Search" aria-label="Search">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span class="fa fa-search"></span>
              </div>
            </div>
          </div>
        </form>
        <!-- Navigation -->
        <ul class="navbar-nav">
          <li class="nav-item ">
            <a class="nav-link" href="/">
              <i class="ni ni-tv-2 text-primary"></i> HEY ê¸ˆìœµ+ í™ˆìœ¼ë¡œ
            </a>
          </li>
          <li class="nav-item   ">
            <a class="nav-link   " href="/summary">
              <i class="ni ni-tv-2 text-primary"></i> ëŒ€ì‹œë³´ë“œ
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/summary/exchange_rate">
              <i class="ni ni-bullet-list-67 text-red"></i> í™˜ìœ¨
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link active " href="javascript:void(0)">
              <i class="ni ni-bullet-list-67 text-red"></i> ê¸ˆ
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/summary/real_estate">
              <i class="ni ni-bullet-list-67 text-red"></i> ë¶€ë™ì‚°(Comming soon)
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/summary/coin">
              <i class="ni ni-bullet-list-67 text-red"></i> ì½”ì¸(Comming soon)
            </a>
          </li>
        </ul>
        <!-- Divider -->
        <hr class="my-3">
        <!-- Heading -->
        <h6 class="navbar-heading text-muted">ê¸ˆìœµ Docs</h6>
        <!-- Navigation -->
        <ul class="navbar-nav mb-md-3">
          <li class="nav-item">
            <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/getting-started/overview.html">
              <i class="ni ni-spaceship"></i> ì‹œì‘í•˜ê¸°
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/foundation/colors.html">
              <i class="ni ni-palette"></i> í›„ì›í•˜ê¸°
            </a>
          </li>
        </ul>
        <ul class="navbar-nav">
          <li class="nav-item active active-pro">
            <a class="nav-link" href="./examples/upgrade.html">
              <i class="ni ni-send text-dark"></i> Send - Email
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="main-content">
    <!-- Navbar -->
    <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block" href="./index.html">Dashboard</a>
        
        <!-- User -->
        <ul class="navbar-nav align-items-center d-none d-md-flex">
          <li class="nav-item dropdown">
            <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <div class="media align-items-center">
                <span class="avatar avatar-sm rounded-circle">
                  <img alt="Image placeholder" src="{%static '/assets/img/theme/team-4-800x800.jpg' %}">
                </span>
                <div class="media-body ml-2 d-none d-lg-block">
                  <span class="mb-0 text-sm  font-weight-bold">{{user.username}}</span>
                </div>
              </div>
            </a>
            <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
              <div class=" dropdown-header noti-title">
                <h6 class="text-overflow m-0">Welcome!</h6>
              </div>
              <a href="./examples/profile.html" class="dropdown-item">
                <i class="ni ni-single-02"></i>
                <span>My profile</span>
              </a>
              <a href="./examples/profile.html" class="dropdown-item">
                <i class="ni ni-settings-gear-65"></i>
                <span>Settings</span>
              </a>
              <a href="./examples/profile.html" class="dropdown-item">
                <i class="ni ni-calendar-grid-58"></i>
                <span>Activity</span>
              </a>
              <a href="./examples/profile.html" class="dropdown-item">
                <i class="ni ni-support-16"></i>
                <span>Support</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="/accounts/logout" class="dropdown-item">
                <i class="ni ni-user-run"></i>
                <span>Logout</span>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
    <!-- End Navbar -->
    
    <!-- Header -->
    <div class="header pb-8 pt-5 pt-md-8" style="background: linear-gradient(87deg, #94bbe9  0px, #3498db 100%);">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Search Button -->
          <form class="navbar-search navbar-search-dark form-inline">
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-search"></i></span>
                </div>
                <input class="form-control custom-width-input" placeholder="Search" type="text">
            </div>
          </form>
        </div>

          <!-- Card stats -->
          <div class="row">
            <div class="col-xl-3 col-lg-6">
              <div class="card-2 card-stats mb-4 mb-xl-0">
                <div class="card-2-body">
                  <div class="row">
                    <div class="col">
                      <br>
                      <span class="h2 font-weight-bold mb-0" >ê¸ˆ ì†Œì‹</span>
                      <br>
                      <br>
                      <span class="h-exchange">ê¸ˆ ì¸í”Œë ˆì´ì…˜ì´ ì¼ì–´ë‚˜ëŠ” ì´ìœ  : ê¸ˆê°’ì€ ë³´í†µ ì¸í”Œë ˆì´ì…˜(ë¬¼ê°€ ìƒìŠ¹)ê³¼ ê²½ê¸° ì¹¨ì²´ì— ëŒ€í•œ ëŒ€ë¹„ ìˆ˜ë‹¨ì¸ ì•ˆì „ìì‚°ì´ë‹¤. ê·¸ëŸ¬ë‚˜ í˜„ì¬ ë¯¸êµ­ ê¸ˆë¦¬ ì¸í•˜ê°€ ì˜ˆìƒë˜ì–´ ê¸ˆê°’ì´ ê¸‰ë“±í•˜ê³  ìˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì—ì„œ ê¸ˆì€ ì•ˆì „ìì‚°ìœ¼ë¡œì„œì˜ ì—­í• ì„ ë†’ì´ë©° íˆ¬ììë“¤ ì‚¬ì´ì—ì„œ ì¸ê¸°ë¥¼ ì–»ê³  ìˆë‹¤.</span>
                      <div class="chart-example">
                      {% comment %} <img src="./assets/img/brand/zoochart.png" width="400" height="300"> {% endcomment %}

                      </div>
                    </div>
                    
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                  </p>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-6">
              <div class="card-2 card-2-stats mb-4 mb-xl-0">
                <div class="card-2-body">
                    <div class="col">
                      <br>
                      <span class="h2 font-weight-bold mb-0">êµ­ë‚´ ê¸ˆ ì •ë³´</span>
                      <span class="h4">({% now "Y-m-d" %})</span>
                      <br>
                      <br>
                      <div class="exchange-box">
                        <span class="h3 font-weight-bold mb-0">í˜„ì¬ ê¸ˆ ì‹œì„¸</span>
                        <span class='h4'>(1g)</span>
                        <br>
                        <br>
                      <div class="h-exchange-right">
                        <span class="h2">{{current_gold|intcomma}}ì›</span>
                      </div>
                      </div>
                      <br>
                      <div class="exchange-box">
                        <span class="h3 font-weight-bold mb-0">í˜„ì¬ ê¸ˆ ì‹œì„¸</span>
                        <span class='h4'>(1ëˆ = 3.75g)</span>
                        <br>
                        <br>
                      <div class="h-exchange-right">
                        <span class="h2"id="newVariable"></span>
                  
                      </div>
                      </div>
                    </div>
                    <div class="news-text">
                      {{corp_info}}
                    </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-6">
              <div class="card-2 card-2-stats mb-4 mb-xl-0">
                <div class="card-2-body">
                  <br>
                  <span class="h2 font-weight-bold mb-0">ê¸ˆ ì‹œì„¸ ë‰´ìŠ¤ ìš”ì•½</span>
                  <div class = "jb-container">
                    {% for news in gold_news %}
                      <p class="jb-title" onclick="showPopup({{ forloop.counter }})">{{news.title}}</p>
                      <div id="popup{{ forloop.counter }}" class="popup hide layer">
                          <div class="content">
                            <div class="pop-title">{{news.title}}</div>
                              <div class="pop-date">{{news.date}}</div>
                              <div class="pop-summary">{{news.summary}}
                                <button onclick="closePopup({{ forloop.counter }})" class="custom-end">ë‹«ê¸°</button>
                                </div>
                              <a class="pop-link" target='_blank' href='{{news.link}}'>{{news.link}}</a>
                          </div>
                      </div>
                    {% endfor %}
                   
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card-2 card-2-stats mb-4 mb-xl-0">
                <div class="card-2-body">
                  <div class="row">
                    <div class="col">
                      <br>
                      <span class="h2 font-weight-bold mb-0">ê¸ˆê°’ ê³„ì‚°ê¸°</span>
                    </div>
                  </div>
                  <div class="gold-calc-box">
                    <div class = "jb-container" id='calc-gold'>
                          <input id='calc-input-gold' value=1>
                          <div id='calc-result-gold'></div>
                          <div class='gold-calcbox-main'>
                            <button onclick="appendToInput('calc-input-gold', '1')">1</button>
                            <button onclick="appendToInput('calc-input-gold', '2')">2</button>
                            <button onclick="appendToInput('calc-input-gold', '3')">3</button>
                            <button onclick="calcGold()">ğŸŸ°</button>
                            <br>
                            <button onclick="appendToInput('calc-input-gold', '4')">4</button>
                            <button onclick="appendToInput('calc-input-gold', '5')">5</button>
                            <button onclick="appendToInput('calc-input-gold', '6')">6</button>
                            <button onclick="meaningless()" class="meaningless-button" id="calc-input-currency-nomean-button"></button>
                            <br>
                            <button onclick="appendToInput('calc-input-gold', '7')">7</button>
                            <button onclick="appendToInput('calc-input-gold', '8')">8</button>
                            <button onclick="appendToInput('calc-input-gold', '9')">9</button>
                            <button onclick="meaningless()" class="meaningless-button" id="calc-input-currency-nomean-button"></button>
                            <br>
                            <button onclick="appendToInput('calc-input-gold', '0')">0</button>
                            <button onclick="appendToInput('calc-input-gold', '.')">.</button>
                            <button onclick="removeLastDigit('calc-input-gold')">â†</button>
                            <button onclick="meaningless()" class="meaningless-button" id="calc-input-currency-nomean-button"></button>
                            </div>
                  </div>
                  </div>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ì°¨íŠ¸ ê·¸ë ¤ì§€ëŠ” ê³µê°„-->
    <div class="container-fluid mt--7">
      <div class="row">
        <div class="col-xl-8 mb-5 mb-xl-0">
          <div class="card bg-gradient-default shadow">
            <div class="card-header bg-transparent">
              <div class="row align-items-center">
                <div class="col">
                  <br>
                  <h2 class="h-exchange-left">ê¸ˆ ì •ë³´</h2>
                  
                </div>
                <div class="col">
                  <ul class="nav nav-pills justify-content-end">
                    <li class="nav-item mr-2 mr-md-0" data-toggle="chart" data-target="#chart-sales2" 
                    data-update='{"data":{"datasets":[{"data":[38408688000,2000,5000,9000]}]}}' data-prefix="$" data-suffix="k">
                      <a href="#" class="nav-link py-2 px-3 active" data-toggle="tab">
                        <span class="d-none d-md-block">{% now "Y" %}</span>
                        <span class="d-md-none">M</span>
                      </a>
                    </li>
                    
                  </ul>
                </div>
              </div>
            </div>

            <div class="card-body">
              <!-- Chart ì°¨íŠ¸ ì—¬ê¸°ë¶€í„°-->
              <div class="chart">
                <!-- Chart wrapper -->
                <canvas id="chart-sales2" class="chart-canvas"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="card-chat-bot">
          <div class="card shadow">
            <div class="card-header bg-transparent">
              <div class="row align-items-center">
                <div class="col">
                  <br>
                  <h2 class="mb-0" id="news-title">ê¸ˆ Chatbot</h2>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-custom scrollbar" style="max-height: 300px; overflow-y: auto;">
                <!-- ì‚¬ìš©ì ì§ˆë¬¸ê³¼ ì±—ë´‡ ë‹µë³€ì„ í‘œì‹œí•˜ëŠ” ëŒ€í™”ì°½ -->
                <div class="news-text" id='chatbot_conversation'></div>
                
              </div>
            </div>
            <div class="card-footer-2">
              <div class="send">
                <!-- ì‚¬ìš©ìê°€ ë©”ì„¸ì§€ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” í…ìŠ¤íŠ¸ ì˜ì—­ê³¼ ì „ì†¡ ë²„íŠ¼ -->
                <textarea class="send-text" placeholder="ë©”ì„¸ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="message-input"></textarea>
                <button class='send-btn' onclick="sendMessage()">ì „ì†¡</button>
              </div>
            </div>
          </div>
        </div>
        
      <!--ROE, PER, PBR, ë¶€ì±„ ë“±ë“±...ì¬ë¬´ì œí‘œ ì‰½ê²Œ ì•Œë ¤ì£¼ê¸°-->
      
      <!-- Footer -->
      
      <footer class="footer">
        <div class="row align-items-center justify-content-xl-between">
          <div class="col-xl-6">
            <div class="copyright text-center text-xl-left text-muted">
              &copy; 2018 <a href="https://www.creative-tim.com" class="font-weight-bold ml-1" target="_blank">Creative Tim</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>
  <!--   Core   -->
  <script src="{%static '/assets/js/plugins/jquery/dist/jquery.min.js' %}"></script>
  <script src="{%static '/assets/js/plugins/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
  <!--   Optional JS   -->
  <script src="{%static '/assets/js/plugins/chart.js/dist/Chart.min.js' %}"></script>
  <!-- ê·¸ë˜í”„ ëª¨ì–‘ê³¼ ê´€ë ¨ë¨   -->
  <script src="{%static '/assets/js/plugins/chart.js/dist/Chart.extension.js' %}"></script>
  <!--   Argon JS   -->
  <script src="{%static '/assets/js/argon-dashboard.min.js'%}?v=1.1.2"></script>
  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
  <script type="text/javascript"> window.CSRF_TOKEN = "{{ csrf_token }}"; </script>
  <script>
    function drawSalesChart(e){
      var labels = []
      var datas = []
      {%for data in gold_data%}
        labels.push("{{data.Date|date:'Y-m-d'}}");
        datas.push(Number({{data.Close}}));
      {%endfor%}
      
      salesChart = new Chart(e, {
        type: "line",
        options: {
          scales: {
            yAxes: [
              {
                gridLines: {
                  lineWidth: 1,
                  color: Charts.colors.gray[900],
                  zeroLineColor: Charts.colors.gray[900],
                },
                ticks: {
                  beginAtZero: false,
                  callback: function (e) {
                    if (!(e % 10)) return "ï¿¦" + e.toLocaleString('ko-KR');
                  },
                },
              },
            ],
          },
          tooltips: {
            callbacks: {
              label: function (e, a) {
                var t = a.datasets[e.datasetIndex].label || "",
                  o = e.yLabel,
                  n = "";
                return (
                  1 < a.datasets.length &&
                    (n +=
                      '<span class="popover-body-label mr-auto">' +
                      t +
                      "</span>"),
                  (n += '<span class="popover-body-value">' + o.toLocaleString('ko-KR') + "ì›</span>")
                );
              },
            },
          },
        },
        data: {
          labels: labels,
          datasets: [
            {
              label: "Performance",
              data: datas,
              borderWidth: 3,
              borderColor: "rgba(255, 99, 132, 1)",
            },
          ],
        },
      })
    }
    
    DeptChart = function () {
      var e, a, t = $("#chart-dept");
      var initialData = {
        labels: ["ë¶€ì±„", "ìë³¸"],
        datasets: [{
          label: "ë¶€ì±„ ë¹„ìœ¨",
          data: [20, 60],
          backgroundColor: ['warning', '#fb6340'] // Adjust colors as needed
        }]
      };
      if (t.length) {
        e = t;
        a = new Chart(e, {
          type: "doughnut",
          options: {
            responsive: true,
            maintainAspectRatio: true,
            legend: {
              display: true,
              position: 'right',
              labels: {
                fontColor: 'black'
              }
            },
            tooltips: {
              callbacks: {
                label: function (e, a) {
                  var t = a.labels[e.index] || "",
                    o = a.datasets[0].data[e.index],
                    n = "";
                  return n += '<span class="popover-body-value">' + t + ":" + o + "%</span>"
                }
              }
            },
            plugins: {
              labels: {
                render: 'percentage',
                fontColor: ['#ff0000', '#0000ff'],
                precision: 2
              }
            }

          },
          data: initialData
        }), e.find("canvas").attr("width", "100").attr("height", "100"), e.data("chart", a)
      }
    }();

  $(function () {
    // íˆ´íŒ ì´ˆê¸°í™”
    $('[data-toggle="tooltip"]').tooltip();
    
  });

  $(document).ready(function () {
    $("#chart-dept-card").hover(
      function () {
        $("#chart-dept-title").css("display", "block");
      },
      function () {
        $("#chart-dept-title").css("display", "none");
      }
    );

    var currentGoldValue = parseFloat('{{ current_gold }}'.replace(/[^0-9.]/g, ''));
    var multipliedValue = currentGoldValue * 3.75;

    // ê²°ê³¼ë¥¼ HTMLì— í‘œì‹œ
    $('#newVariable').text(multipliedValue.toLocaleString() + 'ì›');
  });


  const targetTextarea = document.querySelector('#message-input');

  function adjustTextareaHeight() {
      // í…ìŠ¤íŠ¸ì˜ì—­ ë†’ì´ë¥¼ ì‹¤ì œ ì»¨í…ì¸ ì˜ ë†’ì´ë¡œ ì¬ì„¤ì •
      targetTextarea.style.height = 'auto';

      // í…ìŠ¤íŠ¸ì˜ì—­ ë†’ì´ë¥¼ ìŠ¤í¬ë¡¤ ë†’ì´ì— ë§ì¶° ì„¤ì •
      targetTextarea.style.height = targetTextarea.scrollHeight + 'px';
      targetTextarea.scrollDown = targetTextarea.scrollHeight;
    }

  // ì¸í’‹ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ë†’ì´ ì¡°ì ˆ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
  targetTextarea.addEventListener('input', adjustTextareaHeight);

  // í˜ì´ì§€ ë¡œë”© ì‹œ ì´ˆê¸° ë†’ì´ ì¡°ì ˆ
  adjustTextareaHeight();

  function calcGold(){
    
    var calc_input = Number(document.querySelector('#calc-input-gold').value)
    var result = Number({{current_gold}}) * calc_input
    console.log(result)
    $("#calc-result-gold").html('');
    $("#calc-result-gold").html(result.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ì›');
  }

  // ì±—ë´‡ js
  $(document).ready(function () {
    // í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì±—ë´‡ ì´ˆê¸° ì¸ì‚¬ë§ í‘œì‹œ
    $('#chatbot_conversation').append("<p class='chatbot-answer'> Hey, ê¸ˆìœµì—ê²Œ ê¸ˆ ì •ë³´ë¥¼ ë¬¼ì–´ë³´ì„¸ìš”!</p>");
    drawSalesChart($('#chart-sales2'))
    });

  function sendMessage() {
    // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì§ˆë¬¸ ê°€ì ¸ì˜¤ê¸°
    let userQuestion = $('#message-input').val();
  
    // ë©”ì‹œì§€ ì „ì†¡ í›„ textarea ë¹„ìš°ê¸°
    $('#message-input').val('');

    // ì‚¬ìš©ì ì§ˆë¬¸ì„ ëŒ€í™”ì°½ì— ì¶”ê°€
    $('#chatbot_conversation').append("<p class='user-question'>" + userQuestion + "</p>");
  
    // AJAXë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì— ì§ˆë¬¸ì„ ì „ì†¡í•˜ê³  ë‹µë³€ì„ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„
    $.ajax({
        type: 'post',
        url: '/summary/gold_chatbot/',
        data: {
            data: userQuestion,
            csrfmiddlewaretoken: window.CSRF_TOKEN,
        },
        success: function (data) {
            console.log(data);

            // ì±—ë´‡ì˜ ë‹µë³€ì„ ëŒ€í™”ì°½ì— ì¶”ê°€
            $('#chatbot_conversation').append("<p class='chatbot-answer'>" + data.chat_answer + "</p>");


            // placeholderë¥¼ ë‹¤ì‹œ ë³´ì´ë„ë¡ ì„¤ì •
            $('#message-input').attr("placeholder", "ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”");

            
            // ëŒ€í™”ì°½ì„ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
            $('.card-custom').scrollTop($('.card-custom')[0].scrollHeight);
          },
      });

      // ëŒ€í™”ì°½ì„ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
      $('.card-custom').scrollTop($('.card-custom')[0].scrollHeight);
    }
    
    $('.card-custom').on('scroll', function () {
      if ($('.card-custom').scrollTop() + $('.card-custom').innerHeight() >= $('.card-custom')[0].scrollHeight) {
        // ë§¨ ì•„ë˜ì— ë„ë‹¬í•œ ê²½ìš° ìŠ¤í¬ë¡¤ì„ ìœ ì§€
        $('.card-custom').scrollTop($('.card-custom')[0].scrollHeight);
      }
    });
  
  
    //í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ë‹¬ëŸ¬,ì—”í™” 1ë‹¨ìœ„ ê³„ì‚° ê²°ê³¼ ì¶œë ¥
    document.addEventListener('DOMContentLoaded', function () {
      // í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
      setInitialExchangeRate();
    });
    function setInitialExchangeRate() {
      // ì´ˆê¸° í™˜ìœ¨ì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
      var initialDollarRate = 1; // 1ë‹¬ëŸ¬ì˜ ì´ˆê¸° í™˜ìœ¨
      var initialYenRate = 1; // 1ì—”í™”ì˜ ì´ˆê¸° í™˜ìœ¨
      // ë‹¬ëŸ¬ ê³„ì‚°ê¸° ì´ˆê¸° ì„¤ì •
      document.getElementById('calc-input-gold').value = initialDollarRate;
      updatePlaceholder('calc-input-gold'); // í”Œë ˆì´ìŠ¤í™€ë” ì—…ë°ì´íŠ¸
      calcGold(); // ì´ˆê¸° ê³„ì‚° ê²°ê³¼ ì—…ë°ì´íŠ¸
    }
    // í”Œë ˆì´ìŠ¤í™€ë” ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updatePlaceholder(inputId) {
      var inputElement = document.getElementById(inputId);
      var inputValue = inputElement.value;
  

    }
    // ê¸ˆê°’ ê²°ê³¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateGoldResult(containerId, rate) {
      var resultContainer = document.getElementById('calc-result-' + containerId);
      var result = rate * 1; 
      resultContainer.innerHTML = result.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ì›';
    }

    function appendToInput(inputId, value) {
      document.getElementById(inputId).value += value;
  
    }
    function removeLastDigit(inputId) {
      var inputValue = document.getElementById(inputId).value;
      document.getElementById(inputId).value = inputValue.slice(0, -1);
    }
  
    function showPopup(number) {
      var popup = document.getElementById("popup"+number);
      popup.classList.remove("hide");
      popup.classList.add("show");
    }
  
    function closePopup(number) {
        var popup = document.getElementById("popup"+number);
        popup.classList.remove("show");
        popup.classList.add("hide");
    }
    // ì™¸ë¶€ì˜ì—­ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
    $(document).mouseup(function (e) {
      var popContent = $('#popup');
      if (popContent.has(e.target).length === 0) {
          popContent.addClass('hide');
      }
    });
  </script>
</body>
</html>

